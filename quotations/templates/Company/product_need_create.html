{% extends 'Company/cmp_base.html' %}
{% block title %}Add Product Needs{% endblock %}
{% block content %}
<div class="container mt-5">
    <h2>Add Product Needs</h2>
    <form method="post">
        {% csrf_token %}
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="employee" class="form-label">Employee</label>
                <select name="employee" class="form-select" required>
                    <option value="">Select Employee</option>
                    {% for emp in employees %}
                    <option value="{{ emp.id }}">{{ emp }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <label for="site" class="form-label">Site</label>
                <select name="site" class="form-select" required>
                    <option value="">Select Site</option>
                    {% for s in sites %}
                    <option value="{{ s.id }}">{{ s }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        {% for i in range %}
        <div class="row border rounded p-3 mb-2">
            <div class="col-md-4">
                <label>Product {{ i }}</label>
                <select name="product{{ i }}" class="form-select">
                    <option value="">--Select--</option>
                    {% for p in products %}
                    <option value="{{ p.id }}">{{ p }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-2">
                <label>Qty</label>
                <input type="number" name="qty{{ i }}" class="form-control" min="1">
            </div>
            <div class="col-md-2">
                <label>Rate</label>
                <input type="text" name="rate{{ i }}" class="form-control">
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="msg_status{{ i }}" id="msg_status{{ i }}">
                    <label class="form-check-label" for="msg_status{{ i }}">Msg?</label>
                </div>
            </div>
        </div>
        {% endfor %}

        <button type="submit" class="btn btn-primary mt-3">Submit</button>
        <a href="{% url 'product_need_list' %}" class="btn btn-secondary mt-3">Cancel</a>
    </form>
</div>
{% endblock %}
